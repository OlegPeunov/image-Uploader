(this["webpackJsonpimage-uploader"]=this["webpackJsonpimage-uploader"]||[]).push([[0],{17:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),o=a(9),i=a.n(o),s=(a(8),a(4)),r=a(7),l=a(2),u=a(10),d=a(11),p=new(function(){function e(t){var a=this;Object(u.a)(this,e),this.getUserInfo=function(){return fetch("".concat(a.url,"/users/me"),{headers:{authorization:a.authorization}}).then(a._getResponseData)},this.getCards=function(){return fetch("".concat(a.url,"/cards"),{headers:{authorization:a.authorization}}).then(a._getResponseData)},this.deleteCard=function(e){return fetch("".concat(a.url,"/cards/").concat(e.id),{method:"DELETE",headers:{authorization:a.authorization,"Content-Type":"application/json"}}).then(a._getResponseData)},this.patchUserData=function(e,t){return fetch("".concat(a.url,"/users/me"),{method:"PATCH",headers:{authorization:a.authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then(a._getResponseData)},this.postNewCard=function(e,t){return fetch("".concat(a.url,"/cards"),{method:"post",headers:{authorization:a.authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then(a._getResponseData)},this.setUserAvatar=function(e){return fetch("".concat(a.url,"/users/me/avatar"),{method:"PATCH",headers:{authorization:a.authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then(a._getResponseData)},this.url=t.url,this.authorization=t.authorization}return Object(d.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}}]),e}())({url:"https://nomoreparties.co/cohort12",authorization:"61bfbbef-2f0f-4ba0-a4c0-c034d01c7f11"}),j=a.p+"static/media/logo.fad4f8a5.svg",m=a(0);var b=function(){return Object(m.jsx)("header",{className:"header root__section",children:Object(m.jsx)("img",{alt:"mesto logo",className:"logo",src:j})})};var h=function(e){var t=c.a.useState(!1),a=Object(l.a)(t,2),n=a[0],o=a[1],i=c.a.useState(e.likes.length),s=Object(l.a)(i,2),r=s[0],u=s[1],d="place-card__like-icon".concat(" ",n?"place-card__like-icon_liked":"");return Object(m.jsxs)("div",{className:"place-card",id:e._id,children:[Object(m.jsx)("div",{className:"place-card__image",style:{backgroundImage:"url(".concat(e.link,")")},onClick:function(t){"place-card__delete-icon"!==t.target.classList.value&&e.onCardClick(e.link)},children:Object(m.jsx)("button",{className:"place-card__delete-icon",onClick:e.onCardDelete})}),Object(m.jsxs)("div",{className:"place-card__description",children:[Object(m.jsx)("h3",{className:"place-card__name",children:e.name}),Object(m.jsxs)("div",{className:"place-card__descriptionBox",children:[Object(m.jsx)("button",{className:d,onClick:function(){o(!n),u("place-card__like-icon place-card__like-icon_liked"===d?r-1:r+1)}}),Object(m.jsx)("p",{className:"place-card__likesAmount",children:r})]})]})]})},_=c.a.createContext();var f=function(e){var t=c.a.useContext(_);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"profile root__section",children:Object(m.jsxs)("div",{className:"user-info",children:[Object(m.jsx)("img",{alt:"avatar",className:"user-info__photo",src:t.avatar,onClick:e.onEditAvatar}),"  ",Object(m.jsxs)("div",{className:"user-info__data",children:[Object(m.jsx)("h1",{className:"user-info__name",children:t.name}),Object(m.jsx)("p",{className:"user-info__job",children:t.about}),Object(m.jsx)("button",{className:"button user-info__edit-button",onClick:e.onEditProfile,name:"popup_is-opened",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",children:"Edit"})]}),Object(m.jsx)("button",{className:"button user-info__button",onClick:e.onAddPlace,children:"+"})]})}),Object(m.jsx)("div",{className:"places-list root__section",children:e.cards.map((function(t){var a=t.likes,n=t._id,c=t.link,o=t.name;return Object(m.jsx)(h,{onCardDelete:e.handleCardDelete,onCardClick:e.onCard,likes:a,_id:n,link:c,name:o},n)}))})]})},O=a.p+"static/media/close.8a65f75d.svg";var v=function(e){var t="".concat(e.name," ").concat(e.isOpen?"popup_is-opened":"");return Object(m.jsx)("div",{className:t,id:e.id,children:Object(m.jsxs)("div",{className:"popup__content",children:[Object(m.jsx)("img",{alt:"",src:O,className:"popup__close",onClick:e.onClose}),Object(m.jsx)("h3",{className:"popup__title",children:"".concat(e.title)}),e.children]})})};var g=function(e){var t=e.target;return t.checkValidity()?t.checkValidity?" ":void 0:t.validity.typeMismatch?"\u0417\u0434\u0435\u0441\u044c \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0430":0===t.value.length?"\u042d\u0442\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435":1===t.value.length&&"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043e\u0442 2 \u0434\u043e 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"};var x=function(e){var t=c.a.useContext(_),a=c.a.useState(t.name),n=Object(l.a)(a,2),o=n[0],i=n[1],s=c.a.useState(t.about),r=Object(l.a)(s,2),u=r[0],d=r[1],p=c.a.useState(""),j=Object(l.a)(p,2),b=j[0],h=j[1],f=c.a.useState(""),O=Object(l.a)(f,2),x=O[0],C=O[1],N=c.a.useState(!0),k=Object(l.a)(N,2),y=k[0],S=k[1],D=c.a.useState(!0),z=Object(l.a)(D,2),w=z[0],A=z[1],E="button popup__button ".concat(y&&w?"button-active":"");function P(t){t.preventDefault(),e.onUpdateUser(o,u),S(!0),A(!0)}return c.a.useEffect((function(){i(t.name),d(t.about)}),[t]),Object(m.jsx)(v,{name:"popup popup-type-edit",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",id:"formEdit",isOpen:e.isOpen,onClose:e.onClose,onSubmit:P,children:Object(m.jsxs)("form",{className:"popup__form",noValidate:!0,name:"edit",onSubmit:P,children:[Object(m.jsx)("input",{type:"text",id:"edit-name",name:"name",className:"popup__input popup__input_type_name",required:!0,minLength:"2",maxLength:"30",value:o,onChange:function(e){i(e.target.value),S(e.target.validity.valid),h(g(e))}}),Object(m.jsx)("span",{id:"error-edit-name",className:"error-message",children:b}),Object(m.jsx)("input",{type:"text",id:"job",name:"job",className:"popup__input popup__input_type_link-url",required:!0,minLength:"2",maxLength:"30",value:u,onChange:function(e){console.log(),d(e.target.value),A(e.target.validity.valid),C(g(e))}}),Object(m.jsx)("span",{id:"error-job",className:"error-message",children:x}),Object(m.jsx)("button",{id:"edit-button",className:E,name:"save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})};var C=function(e){var t=c.a.useRef(),a=c.a.useState(""),n=Object(l.a)(a,2),o=n[0],i=n[1],s=c.a.useState(!1),r=Object(l.a)(s,2),u=r[0],d=r[1];function p(a){a.preventDefault(),e.onUpdateAvatar(t.current.value),d(!1),t.current.value=""}return Object(m.jsx)(v,{name:"popup popup-type-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0442\u0430\u0440",id:"formAvatar",isOpen:e.isOpen,onClose:e.onClose,onSubmit:p,children:Object(m.jsxs)("form",{className:"popup__form",noValidate:!0,name:"avatr",onSubmit:p,children:[Object(m.jsx)("input",{type:"url",id:"link",name:"link",className:"popup__input popup__input_type_link-url",required:!0,minLength:"2",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0442\u0430\u0440",ref:t,onChange:function(e){i(g(e)),d(e.target.validity.valid)}}),Object(m.jsx)("span",{id:"error-edit-name",className:"error-message",children:o}),Object(m.jsx)("button",{id:"edit-button",className:"button popup__button ".concat(u?"button-active":""),name:"save",disabled:!u,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})};var N=function(e){var t="".concat("image-wrap"," ",e.card?"image-wrap_is-opened":"");return Object(m.jsx)("div",{className:t,children:Object(m.jsxs)("div",{className:"image__content",children:[Object(m.jsx)("img",{className:"popupImage",alt:"",src:e.card.toString()}),Object(m.jsx)("img",{src:O,alt:"",className:"popupImage__close",onClick:e.onClose})]})})};var k=function(e){var t=c.a.useState(""),a=Object(l.a)(t,2),n=a[0],o=a[1],i=c.a.useState(""),s=Object(l.a)(i,2),r=s[0],u=s[1],d=c.a.useState(""),p=Object(l.a)(d,2),j=p[0],b=p[1],h=c.a.useState(""),_=Object(l.a)(h,2),f=_[0],O=_[1],x=c.a.useState(!1),C=Object(l.a)(x,2),N=C[0],k=C[1],y=c.a.useState(!1),S=Object(l.a)(y,2),D=S[0],z=S[1],w="button popup__button ".concat(N&&D?"button-active":"");function A(t){t.preventDefault(),e.onAddPlace(n,r),o(""),u(""),k(!1),z(!1)}return Object(m.jsx)(v,{name:"popup",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",id:"newPlace",isOpen:e.isOpen,onClose:e.onClose,onSubmit:A,children:Object(m.jsxs)("form",{className:"popup__form",noValidate:!0,name:"new",onSubmit:A,children:[Object(m.jsx)("input",{type:"text",id:"popup-name",name:"name",className:"popup__input popup__input_type_name",required:!0,minLength:"2",maxLength:"30",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:n,onChange:function(e){o(e.target.value),k(e.target.validity.valid),b(g(e))}}),Object(m.jsx)("span",{id:"error-popup-name",className:"error-message",children:j}),Object(m.jsx)("input",{type:"url",id:"link",name:"link",className:"popup__input popup__input_type_link-url",required:!0,minLength:"2",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:r,onChange:function(e){u(e.target.value),O(g(e)),z(e.target.validity.valid)}}),Object(m.jsx)("span",{id:"error-link",className:"error-message",children:f}),Object(m.jsx)("button",{id:"popup-button",className:w,disabled:!N||!D,children:"+"})]})})};var y=function(){var e=c.a.useState(""),t=Object(l.a)(e,2),a=t[0],n=t[1],o=c.a.useState(!1),i=Object(l.a)(o,2),u=i[0],d=i[1],j=c.a.useState(!1),h=Object(l.a)(j,2),O=h[0],v=h[1],g=c.a.useState(!1),y=Object(l.a)(g,2),S=y[0],D=y[1],z=c.a.useState(!1),w=Object(l.a)(z,2),A=w[0],E=w[1],P=c.a.useState([]),L=Object(l.a)(P,2),U=L[0],T=L[1];function R(){v(!1),d(!1),E(!1),D(!1)}return c.a.useEffect((function(){p.getUserInfo().then((function(e){n(e)})).catch((function(e){console.log(e)})),p.getCards().then((function(e){var t=e.map((function(e){return{likes:e.likes,_id:e._id,link:e.link,name:e.name,owner:e.owner}}));T(Object(r.a)(t))})).catch((function(e){console.log(e)}))}),[]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(_.Provider,{value:a,children:[Object(m.jsx)(b,{}),Object(m.jsx)(f,{onEditAvatar:function(){D(!0)},onEditProfile:function(){d(!0)},onAddPlace:function(){v(!0)},onCard:function(e){E(e)},handleCardDelete:function(e){if(window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443?")){var t=e.target.closest(".place-card");t.parentElement.removeChild(t),p.deleteCard(t).then((function(){})).catch((function(e){console.log(e)}))}},cards:U}),Object(m.jsx)(C,{isOpen:S,onClose:R,onUpdateAvatar:function(e){p.setUserAvatar(e).then((function(t){n(Object(s.a)(Object(s.a)({},a),{},{avatar:e})),R()})).catch((function(e){console.log(e)}))}}),Object(m.jsx)(x,{isOpen:u,onClose:R,onUpdateUser:function(e,t){p.patchUserData(e,t).then((function(){R(),n(Object(s.a)(Object(s.a)({},a),{},{name:e,about:t}))})).catch((function(e){console.log(e)}))}}),Object(m.jsx)(k,{isOpen:O,onClose:R,onAddPlace:function(e,t){p.postNewCard(e,t).then((function(e){R(),T([].concat(Object(r.a)(U),[e]))})).catch((function(e){console.log(e)}))}}),Object(m.jsx)(N,{card:A,onClose:R})]})})},S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,18)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),o(e),i(e)}))};i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(y,{})}),document.getElementById("root")),S()},8:function(e,t,a){}},[[17,1,2]]]);
//# sourceMappingURL=main.1978d42d.chunk.js.map